generator client {
  provider = "prisma-client"
  output   = "./generated"
}

datasource db {
  provider = "postgresql"
}

model Link {
  id String @id @default(nanoid())

  createdAt DateTime @default(now()) @map("created_at")
  updatedAt DateTime @updatedAt @map("updated_at")

  name String?
  slug String  @unique

  originalUrl String @map("original_url")

  clicks Click[]

  @@map("links")
}

model Click {
  id String @id @default(nanoid())

  createdAt DateTime @default(now()) @map("created_at")

  ip             String?
  userAgent      String? @map("user_agent")
  referer        String?
  acceptLanguage String? @map("accept_language")

  link   Link   @relation(fields: [linkId], references: [id], onDelete: Cascade)
  linkId String @map("link_id")

  @@index([linkId, createdAt])
  @@map("clicks")
}
